<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> â€¢ elastic</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">elastic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/elastic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/search.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/elastic">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1></h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/elastic/blob/master/vignettes/search.Rmd"><code>vignettes/search.Rmd</code></a></small>
      <div class="hidden name"><code>search.Rmd</code></div>

    </div>

    
    
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Search}
%\VignetteEncoding{UTF-8}
-->
<div id="elastic-searching" class="section level1">
<h1 class="hasAnchor">
<a href="#elastic-searching" class="anchor"></a>elastic searching</h1>
<div id="load-elastic" class="section level2">
<h2 class="hasAnchor">
<a href="#load-elastic" class="anchor"></a>Load elastic</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"elastic"</span>)</a></code></pre></div>
</div>
<div id="the-search-function" class="section level2">
<h2 class="hasAnchor">
<a href="#the-search-function" class="anchor"></a>The Search function</h2>
<p>The main interface to searching documents in your Elasticsearch store is the function <code><a href="../reference/Search.html">Search()</a></code>. I nearly always develop R software using all lowercase, but R has a function called <code><a href="https://www.rdocumentation.org/packages/base/topics/search">search()</a></code>, and I wanted to avoid collision with that function.</p>
<p><code><a href="../reference/Search.html">Search()</a></code> is an interface to both the HTTP search API (in which queries are passed in the URI of the request, meaning queries have to be relatively simple), as well as the POST API, or the Query DSL, in which queries are passed in the body of the request (so can be much more complex).</p>
<p>There are a huge amount of ways you can search Elasticsearch documents - this tutorial covers some of them, and highlights the ways in which you interact with the R outputs.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/connect.html">connect</a></span>()</a></code></pre></div>
<div id="search-an-index" class="section level3">
<h3 class="hasAnchor">
<a href="#search-an-index" class="anchor"></a>Search an index</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">out<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 5000</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">out<span class="op">$</span>hits<span class="op">$</span>hits[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; $`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $`_id`
#&gt; [1] "0"
#&gt; 
#&gt; $`_score`
#&gt; [1] 1
#&gt; 
#&gt; $`_source`
#&gt; $`_source`$line_id
#&gt; [1] 1
#&gt; 
#&gt; $`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $`_source`$line_number
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$speaker
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$text_entry
#&gt; [1] "ACT I"</code></pre>
</div>
<div id="search-an-index-by-type" class="section level3">
<h3 class="hasAnchor">
<a href="#search-an-index-by-type" class="anchor"></a>Search an index by type</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index =</span> <span class="st">"shakespeare"</span>, <span class="dt">type =</span> <span class="st">"line"</span>)<span class="op">$</span>hits<span class="op">$</span>hits[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; $`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $`_id`
#&gt; [1] "0"
#&gt; 
#&gt; $`_score`
#&gt; [1] 1
#&gt; 
#&gt; $`_source`
#&gt; $`_source`$line_id
#&gt; [1] 1
#&gt; 
#&gt; $`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $`_source`$line_number
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$speaker
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$text_entry
#&gt; [1] "ACT I"</code></pre>
</div>
<div id="return-certain-fields" class="section level3">
<h3 class="hasAnchor">
<a href="#return-certain-fields" class="anchor"></a>Return certain fields</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index =</span> <span class="st">"shakespeare"</span>, <span class="dt">body =</span> <span class="st">'{</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  "_source": ["play_name", "speaker"]</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">}'</span>)<span class="op">$</span>hits<span class="op">$</span>hits[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; $`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $`_id`
#&gt; [1] "0"
#&gt; 
#&gt; $`_score`
#&gt; [1] 1
#&gt; 
#&gt; $`_source`
#&gt; $`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $`_source`$speaker
#&gt; [1] ""</code></pre>
</div>
<div id="paging" class="section level3">
<h3 class="hasAnchor">
<a href="#paging" class="anchor"></a>Paging</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">size=</span><span class="dv">1</span>, <span class="dt">from=</span><span class="dv">1</span>)<span class="op">$</span>hits</a></code></pre></div>
<pre><code>#&gt; $total
#&gt; [1] 5000
#&gt; 
#&gt; $max_score
#&gt; [1] 1
#&gt; 
#&gt; $hits
#&gt; $hits[[1]]
#&gt; $hits[[1]]$`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $hits[[1]]$`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $hits[[1]]$`_id`
#&gt; [1] "14"
#&gt; 
#&gt; $hits[[1]]$`_score`
#&gt; [1] 1
#&gt; 
#&gt; $hits[[1]]$`_source`
#&gt; $hits[[1]]$`_source`$line_id
#&gt; [1] 15
#&gt; 
#&gt; $hits[[1]]$`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $hits[[1]]$`_source`$speech_number
#&gt; [1] 1
#&gt; 
#&gt; $hits[[1]]$`_source`$line_number
#&gt; [1] "1.1.12"
#&gt; 
#&gt; $hits[[1]]$`_source`$speaker
#&gt; [1] "KING HENRY IV"
#&gt; 
#&gt; $hits[[1]]$`_source`$text_entry
#&gt; [1] "Did lately meet in the intestine shock"</code></pre>
</div>
<div id="queries" class="section level3">
<h3 class="hasAnchor">
<a href="#queries" class="anchor"></a>Queries</h3>
<p>Using the <code>q</code> parameter you can pass in a query, which gets passed in the URI of the query. This type of query is less powerful than the below query passed in the body of the request, using the <code>body</code> parameter.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">type=</span><span class="st">"line"</span>, <span class="dt">q=</span><span class="st">"speaker:KING HENRY IV"</span>)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 5000</code></pre>
<div id="more-complex-queries" class="section level4">
<h4 class="hasAnchor">
<a href="#more-complex-queries" class="anchor"></a>More complex queries</h4>
<p>Here, query for values from 10 to 20 in the field <code>line_id</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">q=</span><span class="st">"line_id:[10 TO 20]"</span>)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 11</code></pre>
</div>
</div>
<div id="get-version-number-for-each-document" class="section level3">
<h3 class="hasAnchor">
<a href="#get-version-number-for-each-document" class="anchor"></a>Get version number for each document</h3>
<p>Version number usually is not returned.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(<span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">version=</span><span class="ot">TRUE</span>, <span class="dt">size=</span><span class="dv">2</span>)<span class="op">$</span>hits<span class="op">$</span>hits, <span class="st">"[["</span>, <span class="st">"_version"</span>)</a></code></pre></div>
<pre><code>#&gt; [1] 3 4</code></pre>
</div>
<div id="get-raw-data" class="section level3">
<h3 class="hasAnchor">
<a href="#get-raw-data" class="anchor"></a>Get raw data</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">type=</span><span class="st">"line"</span>, <span class="dt">raw=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>#&gt; [1] "{\"took\":0,\"timed_out\":false,\"_shards\":{\"total\":5,\"successful\":5,\"skipped\":0,\"failed\":0},\"hits\":{\"total\":5000,\"max_score\":1.0,\"hits\":[{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"0\",\"_score\":1.0,\"_source\":{\"line_id\":1,\"play_name\":\"Henry IV\",\"line_number\":\"\",\"speaker\":\"\",\"text_entry\":\"ACT I\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"14\",\"_score\":1.0,\"_source\":{\"line_id\":15,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.12\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"Did lately meet in the intestine shock\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"19\",\"_score\":1.0,\"_source\":{\"line_id\":20,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.17\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"The edge of war, like an ill-sheathed knife,\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"22\",\"_score\":1.0,\"_source\":{\"line_id\":23,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.20\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"Whose soldier now, under whose blessed cross\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"24\",\"_score\":1.0,\"_source\":{\"line_id\":25,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.22\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"Forthwith a power of English shall we levy;\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"25\",\"_score\":1.0,\"_source\":{\"line_id\":26,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.23\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"Whose arms were moulded in their mothers womb\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"26\",\"_score\":1.0,\"_source\":{\"line_id\":27,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.24\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"To chase these pagans in those holy fields\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"29\",\"_score\":1.0,\"_source\":{\"line_id\":30,\"play_name\":\"Henry IV\",\"speech_number\":1,\"line_number\":\"1.1.27\",\"speaker\":\"KING HENRY IV\",\"text_entry\":\"For our advantage on the bitter cross.\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"40\",\"_score\":1.0,\"_source\":{\"line_id\":41,\"play_name\":\"Henry IV\",\"speech_number\":2,\"line_number\":\"1.1.38\",\"speaker\":\"WESTMORELAND\",\"text_entry\":\"Whose worst was, that the noble Mortimer,\"}},{\"_index\":\"shakespeare\",\"_type\":\"line\",\"_id\":\"41\",\"_score\":1.0,\"_source\":{\"line_id\":42,\"play_name\":\"Henry IV\",\"speech_number\":2,\"line_number\":\"1.1.39\",\"speaker\":\"WESTMORELAND\",\"text_entry\":\"Leading the men of Herefordshire to fight\"}}]}}"</code></pre>
</div>
<div id="curl-debugging" class="section level3">
<h3 class="hasAnchor">
<a href="#curl-debugging" class="anchor"></a>Curl debugging</h3>
<p>Common options are <code>verbose=TRUE</code>, <code>timeout_ms=1</code>, <code>followlocation=TRUE</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">type=</span><span class="st">"line"</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="query-dsl-searches---queries-sent-in-the-body-of-the-request" class="section level3">
<h3 class="hasAnchor">
<a href="#query-dsl-searches---queries-sent-in-the-body-of-the-request" class="anchor"></a>Query DSL searches - queries sent in the body of the request</h3>
<p>Pass in as an R list</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="../reference/mapping.html">mapping_create</a></span>(x, <span class="st">"shakespeare"</span>, <span class="st">"line"</span>, <span class="dt">update_all_types =</span> <span class="ot">TRUE</span>, <span class="dt">body =</span> <span class="st">'{</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">   "properties": {</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="st">     "text_entry": {</span></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="st">       "type":     "text",</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="st">       "fielddata": true</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="st">    }</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="st">  }</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="st">}'</span>)</a></code></pre></div>
<pre><code>#&gt; $acknowledged
#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">aggs &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">aggs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">stats =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">field =</span> <span class="st">"text_entry"</span>))))</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">body=</span>aggs)<span class="op">$</span>hits<span class="op">$</span>hits[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; $`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $`_id`
#&gt; [1] "0"
#&gt; 
#&gt; $`_score`
#&gt; [1] 1
#&gt; 
#&gt; $`_source`
#&gt; $`_source`$line_id
#&gt; [1] 1
#&gt; 
#&gt; $`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $`_source`$line_number
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$speaker
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$text_entry
#&gt; [1] "ACT I"</code></pre>
<p>Or pass in as json query with newlines, easy to read</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">aggs &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">    "aggs": {</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">        "stats" : {</span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="st">            "terms" : {</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="st">                "field" : "text_entry"</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="st">            }</span></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="st">        }</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="st">    }</span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="st">}'</span></a>
<a class="sourceLine" id="cb26-10" data-line-number="10"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">body=</span>aggs)<span class="op">$</span>hits<span class="op">$</span>hits[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; $`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $`_id`
#&gt; [1] "0"
#&gt; 
#&gt; $`_score`
#&gt; [1] 1
#&gt; 
#&gt; $`_source`
#&gt; $`_source`$line_id
#&gt; [1] 1
#&gt; 
#&gt; $`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $`_source`$line_number
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$speaker
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$text_entry
#&gt; [1] "ACT I"</code></pre>
<p>Or pass in collapsed json string</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">aggs &lt;-<span class="st"> '{"aggs":{"stats":{"terms":{"field":"text_entry"}}}}'</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">body=</span>aggs)<span class="op">$</span>hits<span class="op">$</span>hits[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; $`_index`
#&gt; [1] "shakespeare"
#&gt; 
#&gt; $`_type`
#&gt; [1] "line"
#&gt; 
#&gt; $`_id`
#&gt; [1] "0"
#&gt; 
#&gt; $`_score`
#&gt; [1] 1
#&gt; 
#&gt; $`_source`
#&gt; $`_source`$line_id
#&gt; [1] 1
#&gt; 
#&gt; $`_source`$play_name
#&gt; [1] "Henry IV"
#&gt; 
#&gt; $`_source`$line_number
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$speaker
#&gt; [1] ""
#&gt; 
#&gt; $`_source`$text_entry
#&gt; [1] "ACT I"</code></pre>
</div>
<div id="aggregations" class="section level3">
<h3 class="hasAnchor">
<a href="#aggregations" class="anchor"></a>Aggregations</h3>
<p>Histograms</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">aggs &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">    "aggs": {</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="st">        "latbuckets" : {</span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="st">           "histogram" : {</span></a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="st">               "field" : "decimalLatitude",</span></a>
<a class="sourceLine" id="cb30-6" data-line-number="6"><span class="st">               "interval" : 5</span></a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="st">           }</span></a>
<a class="sourceLine" id="cb30-8" data-line-number="8"><span class="st">        }</span></a>
<a class="sourceLine" id="cb30-9" data-line-number="9"><span class="st">    }</span></a>
<a class="sourceLine" id="cb30-10" data-line-number="10"><span class="st">}'</span></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"gbif"</span>, <span class="dt">body=</span>aggs, <span class="dt">size=</span><span class="dv">0</span>)<span class="op">$</span>aggregations<span class="op">$</span>latbuckets<span class="op">$</span>buckets[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [[1]]$key
#&gt; [1] -35
#&gt; 
#&gt; [[1]]$doc_count
#&gt; [1] 1
#&gt; 
#&gt; 
#&gt; [[2]]
#&gt; [[2]]$key
#&gt; [1] -30
#&gt; 
#&gt; [[2]]$doc_count
#&gt; [1] 0
#&gt; 
#&gt; 
#&gt; [[3]]
#&gt; [[3]]$key
#&gt; [1] -25
#&gt; 
#&gt; [[3]]$doc_count
#&gt; [1] 0</code></pre>
</div>
<div id="a-bool-query" class="section level3">
<h3 class="hasAnchor">
<a href="#a-bool-query" class="anchor"></a>A bool query</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">mmatch &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st"> "query": {</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="st">   "bool" : {</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="st">     "must_not" : {</span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="st">       "range" : {</span></a>
<a class="sourceLine" id="cb32-6" data-line-number="6"><span class="st">         "speech_number" : {</span></a>
<a class="sourceLine" id="cb32-7" data-line-number="7"><span class="st">           "from" : 1, "to": 5</span></a>
<a class="sourceLine" id="cb32-8" data-line-number="8"><span class="st">}}}}}}'</span></a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(<span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">body=</span>mmatch)<span class="op">$</span>hits<span class="op">$</span>hits, <span class="cf">function</span>(x) x<span class="op">$</span><span class="st">`</span><span class="dt">_source</span><span class="st">`</span><span class="op">$</span>speech_number)</a></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; NULL
#&gt; 
#&gt; [[2]]
#&gt; [1] 6
#&gt; 
#&gt; [[3]]
#&gt; [1] 7
#&gt; 
#&gt; [[4]]
#&gt; [1] 7
#&gt; 
#&gt; [[5]]
#&gt; [1] 7
#&gt; 
#&gt; [[6]]
#&gt; [1] 8
#&gt; 
#&gt; [[7]]
#&gt; [1] 8
#&gt; 
#&gt; [[8]]
#&gt; [1] 9
#&gt; 
#&gt; [[9]]
#&gt; [1] 9
#&gt; 
#&gt; [[10]]
#&gt; [1] 10</code></pre>
</div>
<div id="fuzzy-query" class="section level3">
<h3 class="hasAnchor">
<a href="#fuzzy-query" class="anchor"></a>Fuzzy query</h3>
<p>Fuzzy query on numerics</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">fuzzy &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">query =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">fuzzy =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">text_entry =</span> <span class="st">"arms"</span>)))</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">body =</span> fuzzy)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 49</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">fuzzy &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">query =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">fuzzy =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">text_entry =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">value =</span> <span class="st">"arms"</span>, <span class="dt">fuzziness =</span> <span class="dv">4</span>))))</a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index=</span><span class="st">"shakespeare"</span>, <span class="dt">body=</span>fuzzy)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 617</code></pre>
</div>
<div id="range-query" class="section level3">
<h3 class="hasAnchor">
<a href="#range-query" class="anchor"></a>Range query</h3>
<p>With numeric</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">body &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">query=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">decimalLongitude=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">gte=</span><span class="dv">1</span>, <span class="dt">lte=</span><span class="dv">3</span>))))</a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'gbif'</span>, <span class="dt">body=</span>body)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 24</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">body &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">query=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">decimalLongitude=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">gte=</span><span class="fl">2.9</span>, <span class="dt">lte=</span><span class="dv">10</span>))))</a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'gbif'</span>, <span class="dt">body=</span>body)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 126</code></pre>
<p>With dates</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">body &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">query=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">eventDate=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">gte=</span><span class="st">"2012-01-01"</span>, <span class="dt">lte=</span><span class="st">"now"</span>))))</a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'gbif'</span>, <span class="dt">body=</span>body)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 301</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">body &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">query=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">eventDate=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">gte=</span><span class="st">"2014-01-01"</span>, <span class="dt">lte=</span><span class="st">"now"</span>))))</a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'gbif'</span>, <span class="dt">body=</span>body)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 292</code></pre>
</div>
<div id="more-like-this-query-more_like_this-can-be-shortened-to-mlt" class="section level3">
<h3 class="hasAnchor">
<a href="#more-like-this-query-more_like_this-can-be-shortened-to-mlt" class="anchor"></a>More-like-this query (more_like_this can be shortened to mlt)</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">body &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="st"> "query": {</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="st">   "more_like_this": {</span></a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="st">     "fields": ["abstract","title"],</span></a>
<a class="sourceLine" id="cb46-5" data-line-number="5"><span class="st">     "like": "and then",</span></a>
<a class="sourceLine" id="cb46-6" data-line-number="6"><span class="st">     "min_term_freq": 1,</span></a>
<a class="sourceLine" id="cb46-7" data-line-number="7"><span class="st">     "max_query_terms": 12</span></a>
<a class="sourceLine" id="cb46-8" data-line-number="8"><span class="st">   }</span></a>
<a class="sourceLine" id="cb46-9" data-line-number="9"><span class="st"> }</span></a>
<a class="sourceLine" id="cb46-10" data-line-number="10"><span class="st">}'</span></a>
<a class="sourceLine" id="cb46-11" data-line-number="11"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'plos'</span>, <span class="dt">body=</span>body)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 488</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">body &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="st"> "query": {</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="st">   "more_like_this": {</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="st">     "fields": ["abstract","title"],</span></a>
<a class="sourceLine" id="cb48-5" data-line-number="5"><span class="st">     "like": "cell",</span></a>
<a class="sourceLine" id="cb48-6" data-line-number="6"><span class="st">     "min_term_freq": 1,</span></a>
<a class="sourceLine" id="cb48-7" data-line-number="7"><span class="st">     "max_query_terms": 12</span></a>
<a class="sourceLine" id="cb48-8" data-line-number="8"><span class="st">   }</span></a>
<a class="sourceLine" id="cb48-9" data-line-number="9"><span class="st"> }</span></a>
<a class="sourceLine" id="cb48-10" data-line-number="10"><span class="st">}'</span></a>
<a class="sourceLine" id="cb48-11" data-line-number="11"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'plos'</span>, <span class="dt">body=</span>body)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 58</code></pre>
</div>
<div id="highlighting" class="section level3">
<h3 class="hasAnchor">
<a href="#highlighting" class="anchor"></a>Highlighting</h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">body &lt;-<span class="st"> '{</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="st"> "query": {</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="st">   "query_string": {</span></a>
<a class="sourceLine" id="cb50-4" data-line-number="4"><span class="st">     "query" : "cell"</span></a>
<a class="sourceLine" id="cb50-5" data-line-number="5"><span class="st">   }</span></a>
<a class="sourceLine" id="cb50-6" data-line-number="6"><span class="st"> },</span></a>
<a class="sourceLine" id="cb50-7" data-line-number="7"><span class="st"> "highlight": {</span></a>
<a class="sourceLine" id="cb50-8" data-line-number="8"><span class="st">   "fields": {</span></a>
<a class="sourceLine" id="cb50-9" data-line-number="9"><span class="st">     "title": {"number_of_fragments": 2}</span></a>
<a class="sourceLine" id="cb50-10" data-line-number="10"><span class="st">   }</span></a>
<a class="sourceLine" id="cb50-11" data-line-number="11"><span class="st"> }</span></a>
<a class="sourceLine" id="cb50-12" data-line-number="12"><span class="st">}'</span></a>
<a class="sourceLine" id="cb50-13" data-line-number="13">out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'plos'</span>, <span class="st">'article'</span>, <span class="dt">body=</span>body)</a>
<a class="sourceLine" id="cb50-14" data-line-number="14">out<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 58</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(out<span class="op">$</span>hits<span class="op">$</span>hits, <span class="cf">function</span>(x) x<span class="op">$</span>highlight<span class="op">$</span>title[[<span class="dv">1</span>]])[<span class="dv">8</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>#&gt; [1] "Chronic Hypoxia Promotes Pulmonary Artery Endothelial &lt;em&gt;Cell&lt;/em&gt; Proliferation through H2O2-Induced 5-Lipoxygenase"  
#&gt; [2] "Dynamic Visualization of Dendritic &lt;em&gt;Cell&lt;/em&gt;-Antigen Interactions in the Skin Following Transcutaneous Immunization"
#&gt; [3] "A New Class of Pluripotent Stem &lt;em&gt;Cell&lt;/em&gt; Cytotoxic Small Molecules"</code></pre>
</div>
<div id="scrolling-search---instead-of-paging" class="section level3">
<h3 class="hasAnchor">
<a href="#scrolling-search---instead-of-paging" class="anchor"></a>Scrolling search - instead of paging</h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="st">'shakespeare'</span>, <span class="dt">q=</span><span class="st">"a*"</span>)<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 2747</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">res &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index =</span> <span class="st">'shakespeare'</span>, <span class="dt">q=</span><span class="st">"a*"</span>, <span class="dt">time_scroll =</span> <span class="st">"1m"</span>)</a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="../reference/scroll.html">scroll</a></span>(x, res<span class="op">$</span><span class="st">`</span><span class="dt">_scroll_id</span><span class="st">`</span>, <span class="dt">time_scroll =</span> <span class="st">"1m"</span>)<span class="op">$</span>hits<span class="op">$</span>hits)</a></code></pre></div>
<pre><code>#&gt; [1] 10</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">res &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Search.html">Search</a></span>(x, <span class="dt">index =</span> <span class="st">'shakespeare'</span>, <span class="dt">q =</span> <span class="st">"a*"</span>, <span class="dt">time_scroll =</span> <span class="st">"5m"</span>)</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">out &lt;-<span class="st"> </span>res<span class="op">$</span>hits<span class="op">$</span>hits</a>
<a class="sourceLine" id="cb58-3" data-line-number="3">hits &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb58-4" data-line-number="4"><span class="cf">while</span> (hits <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb58-5" data-line-number="5">  res &lt;-<span class="st"> </span><span class="kw"><a href="../reference/scroll.html">scroll</a></span>(x, res<span class="op">$</span><span class="st">`</span><span class="dt">_scroll_id</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb58-6" data-line-number="6">  hits &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(res<span class="op">$</span>hits<span class="op">$</span>hits)</a>
<a class="sourceLine" id="cb58-7" data-line-number="7">  <span class="cf">if</span> (hits <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb58-8" data-line-number="8">    out &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(out, res<span class="op">$</span>hits<span class="op">$</span>hits)</a>
<a class="sourceLine" id="cb58-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb58-10" data-line-number="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(out)</a></code></pre></div>
<pre><code>#&gt; [1] 2747</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">res<span class="op">$</span>hits<span class="op">$</span>total</a></code></pre></div>
<pre><code>#&gt; [1] 2747</code></pre>
<p>Woohoo! Collected all 2747 documents in very little time.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#elastic-searching">elastic searching</a><ul class="nav nav-pills nav-stacked">
<li><a href="#load-elastic">Load elastic</a></li>
      <li><a href="#the-search-function">The Search function</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
