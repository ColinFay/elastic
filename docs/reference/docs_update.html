<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Update a document — docs_update • elastic</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Update a document — docs_update" />

<meta property="og:description" content="Update a document" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">elastic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/elastic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/search.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/elastic">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Update a document</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/elastic/blob/master/R/docs_update.R'><code>R/docs_update.R</code></a></small>
    <div class="hidden name"><code>docs_update.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Update a document</p>
    
    </div>

    <pre class="usage"><span class='fu'>docs_update</span>(<span class='no'>conn</span>, <span class='no'>index</span>, <span class='no'>type</span>, <span class='no'>id</span>, <span class='no'>body</span>, <span class='kw'>fields</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>source</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>version</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>version_type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>routing</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>parent</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>timestamp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ttl</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>refresh</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>retry_on_conflict</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>wait_for_active_shards</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>detect_noop</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>callopts</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>conn</th>
      <td><p>an Elasticsearch connection object, see <code><a href='connect.html'>connect()</a></code></p></td>
    </tr>
    <tr>
      <th>index</th>
      <td><p>(character) The name of the index. Required</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>(character) The type of the document. Required</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>(numeric/character) The document ID. Can be numeric or character.
Required</p></td>
    </tr>
    <tr>
      <th>body</th>
      <td><p>The document, either a list or json</p></td>
    </tr>
    <tr>
      <th>fields</th>
      <td><p>A comma-separated list of fields to return in the response</p></td>
    </tr>
    <tr>
      <th>source</th>
      <td><p>Allows to control if and how the updated source should be
returned in the response. By default the updated source is not returned.
See <a href='http://bit.ly/2efmYiE'>http://bit.ly/2efmYiE</a> filtering for details</p></td>
    </tr>
    <tr>
      <th>version</th>
      <td><p>(character) Explicit version number for concurrency control</p></td>
    </tr>
    <tr>
      <th>version_type</th>
      <td><p>(character) Specific version type. One of internal,
external, external_gte, or force</p></td>
    </tr>
    <tr>
      <th>routing</th>
      <td><p>(character) Specific routing value</p></td>
    </tr>
    <tr>
      <th>parent</th>
      <td><p>ID of the parent document. Is is only used for routing and
when for the upsert request</p></td>
    </tr>
    <tr>
      <th>timestamp</th>
      <td><p>(date) Explicit timestamp for the document</p></td>
    </tr>
    <tr>
      <th>ttl</th>
      <td><p>(aka &#8220;time to live&#8221;) Expiration time for the document.
Expired documents will be expunged automatically. The expiration date that
will be set for a document with a provided ttl is relative to the timestamp
of the document,  meaning it can be based on the time of indexing or on
any time provided. The provided ttl must be strictly positive and can be
a number (in milliseconds) or any valid time value (e.g, 86400000, 1d).</p></td>
    </tr>
    <tr>
      <th>refresh</th>
      <td><p>Refresh the index after performing the operation. See
<a href='http://bit.ly/2ezW9Zr'>http://bit.ly/2ezW9Zr</a> for details</p></td>
    </tr>
    <tr>
      <th>timeout</th>
      <td><p>(character) Explicit operation timeout, e.g,. 5m (for
5 minutes)</p></td>
    </tr>
    <tr>
      <th>retry_on_conflict</th>
      <td><p>Specify how many times should the operation be
retried when a conflict occurs (default: 0)</p></td>
    </tr>
    <tr>
      <th>wait_for_active_shards</th>
      <td><p>The number of shard copies required to be
active before proceeding with the update operation.
See <a href='http://bit.ly/2fbqkZ1'>http://bit.ly/2fbqkZ1</a> for details.</p></td>
    </tr>
    <tr>
      <th>detect_noop</th>
      <td><p>(logical) Specifying <code>TRUE</code> will cause Elasticsearch
to check if there are changes and, if there aren't, turn the update request
into a noop.</p></td>
    </tr>
    <tr>
      <th>callopts</th>
      <td><p>Curl options passed on to <a href='https://www.rdocumentation.org/packages/crul/topics/HttpClient'>crul::HttpClient</a></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further args to query DSL</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='http://bit.ly/2eVYqLz'>http://bit.ly/2eVYqLz</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
(<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='connect.html'>connect</a></span>())
<span class='kw'>if</span> (!<span class='fu'><a href='indices.html'>index_exists</a></span>(<span class='no'>x</span>, <span class='st'>'plos'</span>)) {
  <span class='no'>plosdat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>"examples"</span>, <span class='st'>"plos_data.json"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"elastic"</span>)
  <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/invisible'>invisible</a></span>(<span class='fu'><a href='docs_bulk.html'>docs_bulk</a></span>(<span class='no'>x</span>, <span class='no'>plosdat</span>))
}

<span class='fu'><a href='docs_create.html'>docs_create</a></span>(<span class='no'>x</span>, <span class='kw'>index</span><span class='kw'>=</span><span class='st'>'plos'</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'article'</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1002</span>,
  <span class='kw'>body</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>id</span><span class='kw'>=</span><span class='st'>"12345"</span>, <span class='kw'>title</span><span class='kw'>=</span><span class='st'>"New title"</span>))
<span class='co'># and the document is there now</span>
<span class='fu'><a href='docs_get.html'>docs_get</a></span>(<span class='no'>x</span>, <span class='kw'>index</span><span class='kw'>=</span><span class='st'>'plos'</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'article'</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1002</span>)
<span class='co'># update the document</span>
<span class='fu'>docs_update</span>(<span class='no'>x</span>, <span class='kw'>index</span><span class='kw'>=</span><span class='st'>'plos'</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'article'</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1002</span>,
  <span class='kw'>body</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>doc</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"Even newer title again"</span>)))
<span class='co'># get it again, notice changes</span>
<span class='fu'><a href='docs_get.html'>docs_get</a></span>(<span class='no'>x</span>, <span class='kw'>index</span><span class='kw'>=</span><span class='st'>'plos'</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'article'</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1002</span>)

<span class='kw'>if</span> (!<span class='fu'><a href='indices.html'>index_exists</a></span>(<span class='no'>x</span>, <span class='st'>'stuffthings'</span>)) {
  <span class='fu'><a href='indices.html'>index_create</a></span>(<span class='no'>x</span>, <span class='st'>"stuffthings"</span>)
}
<span class='fu'><a href='docs_create.html'>docs_create</a></span>(<span class='no'>x</span>, <span class='kw'>index</span><span class='kw'>=</span><span class='st'>'stuffthings'</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'thing'</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>,
  <span class='kw'>body</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"foo"</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"bar"</span>))
<span class='fu'>docs_update</span>(<span class='no'>x</span>, <span class='kw'>index</span><span class='kw'>=</span><span class='st'>'stuffthings'</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'thing'</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>,
  <span class='kw'>body</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>doc</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"hello"</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"bar"</span>)),
  <span class='kw'>source</span> <span class='kw'>=</span> <span class='st'>'name'</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

